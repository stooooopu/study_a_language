<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=marathon, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 제1회 DW 마라톤 참가자 리스트
      /*
        no : 마라톤 등번호
        participant : 참가자
        isComplete : 마라톤 완주 여부 (true : 완주, false: 미완주)
        type : 마라톤 코스
        records : 완주 기록
       */
      const marathonList = [
        // (마라톤 시작 시간은 '2022-04-01 13:00:00' 입니다.)
        {
          no: 300,
          participant: '현상원',
          isComplete: false,
          type: 'half marathon',
          records: 'null',
        },
        {
          no: 400,
          participant: '류근환',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:35:00',
        },
        {
          no: 410,
          participant: '강인석',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:37:20',
        },
        {
          no: 500,
          participant: '유영준',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:40:15',
        },
        {
          no: 201,
          participant: '이승섭',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:31:45',
        },
        {
          no: 555,
          participant: '홍준호',
          isComplete: false,
          type: 'half marathon',
          records: 'null',
        },
        {
          no: 777,
          participant: '이정배',
          isComplete: true,
          type: 'half marathon',
          records: 'null',
        },
      ];
      
        // 1. half marathon에 참여한 참가자는 총 몇 명인지 구하고 출력하시오.
        // console.log(marathonList);
        var count = 0;
        for(var i=0; i<marathonList.length; i++){
          if(marathonList[i].type==='half marathon'){
            ++count;
          }
        };
        // marathonList.forEach(function(item){
        //   if(item.type==='half marathon'){
        //     ++count;
        //   }
        // });
        console.log('1번문제 -> '+count+'명');
        // 2. 완주하지 못한 참가자의 이름과 등번호를 출력하시오.
        for(var i=0; i<marathonList.length; i++){
          // if문 자체가 true일때 실행-> isComplete는 blooen type임
          if(!marathonList[i].isComplete){
            console.log('2번문제 -> 이름 : '+marathonList[i].participant+' ,등번호 : '+marathonList[i].no)
          };
        };
        // 3. 완주는 했는데 기록이 없는 참가자의 이름과 등번호를 출력하시오.
        for(var i=0; i<marathonList.length; i++){
          if(marathonList[i].isComplete && marathonList[i].records==='null'){
            console.log('3번문제 -> 이름 : '+marathonList[i].participant+' ,등번호 : '+marathonList[i].no)
          };
        };
        // 4. 완주한 사람 중 가장 기록이 좋은 참가자의 이름과 등번호를 출력하시오.
        // (마라톤 시작 시간은 '2022-04-01 13:00:00' 입니다.)
        var startTime = new Date('2022-04-01 13:00:00').getTime();
        var index = 0;
        var min = 0;
        var cnt = 0;
        for(var i=0; i<marathonList.length; i++){
          if(marathonList[i].records!=='null'){
            var participantTime = new Date(marathonList[i].records).getTime();
            var diffTime = participantTime - startTime;
            // 0번째사람의 records가 null이기 때문에 if문 자체가 실행 안됨 그래서 임의의 변수 cnt를 줌
            if(cnt===0) {
              min = diffTime;
            }
            // cnt를 밖으로 뺀 이유는 cnt는 계속 증가해서 min = diffTime이 한 번만 실행되어야 해서
            // 그런데 안에 넣어도 상관없음 cnt===0은 한 번만 성립됨
            ++cnt;
            console.log(cnt)
            if(min > diffTime){
              min = diffTime;
              index = i;
            };
          };
        };
        console.log('4번문제 -> 이름 : '+marathonList[index].participant+' ,등번호 : '+marathonList[index].no)
        // 5. 완주한 사람들의 평균 기록을 구하고 출력하시오.
        // (단, 기록이 null인 사람은 제외)
        var startTime = new Date('2022-04-01 13:00:00').getTime();
        var totalTime = 0;
        var count = 0;
        for(var i=0; i<marathonList.length; i++){
          if(marathonList[i].records!=='null'){
            var time = new Date(marathonList[i].records).getTime();
            var diffMin = (time - startTime) / ( 1000 * 60 );
            totalTime += diffMin;
            ++count;
          };
        };
        console.log('5번문제 -> '+totalTime/count+' min');
    </script>
  </body>
</html>
